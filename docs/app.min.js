function setCompletetionDate(e,r){if(r>0){var n=dayOfTheYear(),a=(new Date).getFullYear(),t=Math.ceil(n/r*e),o=new Date(a,0,t);document.querySelector("#finish-date").textContent=o.toLocaleDateString()}else document.querySelector("#finish").style.display="none"}function dayOfTheYear(){var e=new Date,r=e-new Date(e.getFullYear(),0,0);return Math.floor(r/864e5)}"serviceWorker"in navigator&&navigator.serviceWorker.register("/bible-reader-tracker/sw.js",{scope:"/bible-reader-tracker/"}).then(function(e){e.installing?console.log("Service worker installing"):e.waiting?console.log("Service worker installed"):e.active&&console.log("Service worker active")}).catch(function(e){console.log("Registration failed with "+e)});var books={};function calculateBookPercentage(e){for(var r=0,n=document.querySelectorAll("#"+e+" input[type=checkbox]"),a=books[e],t=0;t<n.length;t++)a[t]=n[t].checked,n[t].checked&&r++;setBookPercentage(e,r),setBiblePercentage(),idbKeyval.set("books",books)}function setBiblePercentage(){var e=0;for(var r in books)e+=books[r].filter(e=>e).length;var n=Math.floor(e/1189*100)+"%";document.querySelector("#complete").textContent=n,document.querySelector("#progress-bar").style.width=n,setCompletetionDate(1189,e)}function setBookPercentage(e,r){var n=Math.floor(r/books[e].length*100);document.querySelector("#"+e+"-badge").setAttribute("data-badge",n+"%")}function initBooks(){return{genesis:new Array(50),exodus:new Array(40),leviticus:new Array(27),numbers:new Array(36),deuteronomy:new Array(34),joshua:new Array(24),judges:new Array(21),ruth:new Array(4),firstsamuel:new Array(31),secondsamuel:new Array(24),firstkings:new Array(22),secondkings:new Array(25),firstchronicles:new Array(29),secondchronicles:new Array(36),ezra:new Array(10),nehemiah:new Array(13),esther:new Array(10),job:new Array(42),psalms:new Array(150),proverbs:new Array(31),ecclesiastes:new Array(12),song:new Array(8),isaiah:new Array(66),jeremiah:new Array(52),lamentations:new Array(5),ezekiel:new Array(48),daniel:new Array(12),hosea:new Array(14),joel:new Array(3),amos:new Array(9),obadiah:new Array(1),jonah:new Array(4),micah:new Array(7),nahum:new Array(3),habakkuk:new Array(3),zephaniah:new Array(3),haggai:new Array(2),zechariah:new Array(14),malachi:new Array(4),matthew:new Array(28),mark:new Array(16),luke:new Array(24),john:new Array(21),acts:new Array(28),romans:new Array(16),firstcorinthians:new Array(16),secondcorinthians:new Array(13),galatians:new Array(6),ephesians:new Array(6),philippians:new Array(4),colossians:new Array(4),firstthessalonians:new Array(5),secondthessalonians:new Array(3),firsttimothy:new Array(6),secondtimothy:new Array(4),titus:new Array(3),philemon:new Array(1),hebrews:new Array(13),james:new Array(5),firstpeter:new Array(5),secondpeter:new Array(3),firstjohn:new Array(5),secondjohn:new Array(1),thirdjohn:new Array(1),jude:new Array(1),revelation:new Array(22)}}idbKeyval.get("books").then(function(e){for(var r in books=e||initBooks()){for(var n=0,a=document.querySelectorAll("#"+r+" input[type=checkbox]"),t=0;t<a.length;t++)a[t].checked=books[r][t],a[t].checked&&n++;setBookPercentage(r,n)}setBiblePercentage()});